
umask 0022

test -n "$INTERACTIVE" && {

    # Suppress local mail notices
    shopt -u mailwarn >/dev/null 2>&1
    unset MAILCHECK

    # Do not try to complete when the command is empty/whitespace
    shopt -s no_empty_cmd_completion >/dev/null 2>&1

    # Append history to ~/.bash_history on shell exit
    shopt -s histappend >/dev/null 2>&1

    # Prompt
    #   Uses 256-color support (TERM=xterm-256color).
    #   See bash/functions for _xc(), _nc(), parse_git_branch().
    #
    # \u    Username
    # \w    Current working directory
    # \W    Name of this directory (not full dir)
    # \$?   Expands to $?, i.e. exit value of last command executed
    # \$    $ or # (depending on uid)
    # \j    Number of jobs currently managed by the shell
    #
    export PS1="\n$(_xc 27)[\j] $(_xc 165)\w$(_xc 160)\$(parse_git_branch)\n$(_nc)\u@$(short_nodename){\$?}\\$ "

    # An approximate tcsh equivalent is:
    # set prompt = '%n@%M:%c{%?}%# '

    stty erase '^?' -parenb -istrip echo echoe echoctl echoke tabs cs8

    # Use emacs keybindings at the prompt
    set -o emacs

    # notify of bg job completion immediately
    set -o notify

    # set the titlebar
    echo -ne "\x1b]2;$HOST\x07\x1b]1;$HOST\x07"

}

